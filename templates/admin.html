<!--
=============================================================================
ADMIN PANEL TEMPLATE
=============================================================================
This page allows managing video metadata:
- View all videos in a table format
- Add new videos
- Edit existing videos
- Delete videos
=============================================================================
-->
{% extends "base.html" %}

{% block title %}Admin Panel - Shiv's Animation Studio{% endblock %}

{% block content %}
<!-- 
=======================================================================
ADMIN HEADER
=======================================================================
Page header with title and add button.
-->
<section class="admin-header">
    <div class="admin-header-content">
        <h1>Admin Panel</h1>
        <p>Manage your video collection</p>
    </div>
    <a href="{{ url_for('admin_add') }}" class="btn btn-primary">
        <i data-feather="plus"></i>
        <span>Add Video</span>
    </a>
</section>

<!-- 
=======================================================================
VIDEOS TABLE
=======================================================================
Table displaying all videos with action buttons.
-->
<section class="admin-section">
    {% if videos %}
    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Thumbnail</th>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Duration</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for video in videos %}
                <tr>
                    <td class="td-id">{{ video.id }}</td>
                    <td class="td-thumbnail">
                        <img src="{{ video.thumbnail }}" alt="{{ video.title }}">
                    </td>
                    <td class="td-title">
                        <strong>{{ video.title }}</strong>
                        <span class="video-desc-preview">{{ video.description[:50] }}...</span>
                    </td>
                    <td class="td-category">
                        <span class="category-pill">{{ get_category_name(video.category) }}</span>
                    </td>
                    <td class="td-duration">{{ video.duration }}</td>
                    <td class="td-actions">
                        <a href="{{ url_for('watch', video_id=video.id) }}" 
                           class="action-btn action-view" 
                           title="View">
                            <i data-feather="eye"></i>
                        </a>
                        <a href="{{ url_for('admin_edit', video_id=video.id) }}" 
                           class="action-btn action-edit" 
                           title="Edit">
                            <i data-feather="edit-2"></i>
                        </a>
                        <form action="{{ url_for('admin_delete', video_id=video.id) }}" 
                              method="POST" 
                              class="delete-form"
                              onsubmit="return confirm('Are you sure you want to delete this video?');">
                            <button type="submit" class="action-btn action-delete" title="Delete">
                                <i data-feather="trash-2"></i>
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <!-- Empty state -->
    <div class="admin-empty">
        <i data-feather="video-off"></i>
        <h2>No Videos Yet</h2>
        <p>Start by adding your first video!</p>
        <a href="{{ url_for('admin_add') }}" class="btn btn-primary">
            <i data-feather="plus"></i>
            <span>Add Video</span>
        </a>
    </div>
    {% endif %}
</section>

<!-- Stats summary -->
<section class="admin-stats">
    <div class="stat-card">
        <i data-feather="film"></i>
        <div class="stat-info">
            <span class="stat-number">{{ videos|length }}</span>
            <span class="stat-label">Total Videos</span>
        </div>
    </div>
    <div class="stat-card">
        <i data-feather="folder"></i>
        <div class="stat-info">
            <span class="stat-number">{{ categories|length }}</span>
            <span class="stat-label">Categories</span>
        </div>
    </div>
</section>
{% endblock %}
